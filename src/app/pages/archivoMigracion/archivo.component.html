<ngx-spinner></ngx-spinner>
<div class="card">
  
  <div class="card-header">
    <h6>Arhcivos de migracion de activos</h6>
  </div>
  <div class="card-body">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="col-sm-12">
            <div class="btn-group btn-group-toggle" data-toggle="buttons">
              <button class="btn btn-outline-light btn-sm" [routerLink]='["/archivo"]'>
                <i class="fa fa-plus"></i>
                Nuevo archivo
              </button>
              <button class="btn btn-outline-light btn-sm" (click)="op.toggle($event)">
                <i class="fa fa-filter" ></i>
                Filtro
              </button>
            </div>
        </div>
    </nav>
    <p-table #dt [value]="lista"  [showLoader]="true" [rowHover]="true"  >
      <ng-template pTemplate="header">
        <tr>
          <th width=50px >Id</th>
          <th width=90px [pSortableColumn]="'fechaIngreso'">Fecha
            <p-sortIcon [field]="'fechaIngreso'"></p-sortIcon>
          </th>
          <th>Archivo</th>
          <th width=100px [pSortableColumn]="'migrado'">Estado 
            <p-sortIcon [field]="'migrado'"></p-sortIcon>            
          </th>
          <th width=100px style="text-align: right;">#Activos</th>
          <th width=100px style="text-align: right;">TotalValor</th>
          <th width=50px ></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item >
        <tr class="ui-selectable-row">
          <td class="td_oneline">{{item.id}}</td>
          <td class="td_oneline">{{item.fechaIngreso | date : 'dd/MM/yyyy'}}</td>
          <td>
            <span>{{item.archivo}}</span><br>
            <span style="font-size: 9px;">{{item.observacion}}</span><br>
          </td>
          <td >
            <span *ngIf='item.migrado === "S"' class="badge badge-pill badge-success">Aprobado</span>
            <span *ngIf='item.migrado === "N"' class="badge badge-pill badge-secondary">Ingresado</span>
          </td>
          <td style="text-align: right;">{{item.numeroActivos | number : '0.0'}}</td>
          <td style="text-align: right;">{{item.totalActivos | number :'0.2'}}</td>
          <td style="text-align: center;">
            <button class="btn btn-outline-secondary btn-xs" (click)="clickVer(item)"><i class="fa fa-search"></i></button>
          </td>
        </tr>  
      </ng-template>
    </p-table>
  </div>
</div>
<p-overlayPanel #op [appendTo]="'body'">
  <!-- <p-listbox [options]="lestados" multiple="multiple" checkbox="checkbox"  optionLabel="label" (onChange)="dt.filter(($event.value.map(function(a){return a.value})), 'estado', 'in')">
  </p-listbox> -->
  <p-multiSelect [options]="lestados" 
                 [overlayVisible]="true" 
                 [filter]="false" 
                 (onChange)="dt.filter($event.value, 'estado','in')"
                 [(ngModel)]="selectedFiltro"
  >
  </p-multiSelect>
</p-overlayPanel>